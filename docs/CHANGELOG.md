# 更新日志

所有重要的项目变更都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划添加
- 更多PT应用选择安装
- NAS系统支持
- Web管理界面
- 自动备份恢复功能

## [1.0.0] - 2025-05-26

### 🎉 重大更新
- **完全重构主安装脚本** - 现在支持更多高级功能
- **模块化架构** - 脚本现在可以调用独立的功能模块
- **完整的GitHub Actions支持** - 自动化测试和发布流程
- **Docker容器化支持** - 提供容器化版本的安装器

### ✨ 新增功能

#### 🔧 安装脚本增强
- **命令行参数支持** - 支持 `--install-path`, `--media`, `--debug` 等参数
- **干运行模式** - `--dry-run` 预览安装步骤
- **自动更新功能** - `--update` 自动更新脚本到最新版本
- **完整卸载功能** - `--uninstall` 安全卸载所有组件
- **智能路径配置** - 自动创建和配置目录结构

#### 🎮 交互体验改进
- **彩色输出界面** - 美观的彩色终端输出
- **详细的进度提示** - 每个步骤都有清晰的状态反馈
- **智能错误处理** - 完善的错误捕获和处理机制
- **日志记录系统** - 完整的安装日志记录

#### 📦 应用支持
- **核心PT应用套件**:
  - qBittorrent 4.6.7 - 功能强大的BT下载客户端
  - Transmission 4.0.5 - 轻量级BT下载客户端  
  - IYUU Plus (最新开发版) - PT自动化管理工具
  - MoviePilot v2 (最新版) - 影视自动下载管理
- **媒体服务器选择**:
  - Emby (最新版) - 功能强大的媒体服务器
  - Jellyfin (最新版) - 完全免费开源媒体服务器
  - Plex (最新版) - 主流媒体服务器

#### 🛠️ 管理工具
- **pt-docker 快捷命令** - 统一的服务管理命令
- **自动备份系统** - 定时备份重要配置
- **健康检查机制** - 自动检测和恢复异常服务
- **服务状态监控** - 实时监控所有服务状态

#### 🌐 网络和安全
- **Docker网络隔离** - 独立的Docker网络配置
- **端口冲突检测** - 自动检测和处理端口冲突
- **权限安全管理** - 合理的文件和目录权限设置
- **访问信息展示** - 安装完成后显示所有访问地址

### 🏗️ 项目结构重大改进

#### 📁 完整的项目架构
- **分模块脚本系统**:
  - `scripts/core-apps.sh` - 核心应用安装
  - `scripts/media-servers.sh` - 媒体服务器配置
  - `scripts/docker-utils.sh` - Docker工具集
  - `scripts/utils.sh` - 通用工具函数库
  - `scripts/advanced-installer.sh` - 高级安装器

#### ⚙️ 配置文件系统
- **分类Docker配置**:
  - `configs/docker-compose/download/` - 下载工具配置
  - `configs/docker-compose/automation/` - 自动化工具配置
  - `configs/docker-compose/media/` - 媒体服务器配置
- **配置模板系统**:
  - `configs/templates/nginx.conf.template` - Nginx反向代理模板
  - `configs/templates/qbittorrent.conf.template` - qBittorrent配置模板
  - `configs/templates/environment.env.template` - 环境变量模板

#### 📚 完善的文档系统
- **用户文档**:
  - `docs/installation.md` - 详细安装指南
  - `docs/configuration.md` - 详细配置指南
  - `FAQ.md` - 常见问题解答
- **开发文档**:
  - `PROJECT_STRUCTURE.md` - 项目结构说明
  - `PROJECT_FILES_LIST.md` - 完整文件清单

### 🤖 DevOps 和自动化

#### 🔄 GitHub Actions 工作流
- **自动化测试流水线** (`.github/workflows/test.yml`):
  - Shell脚本语法检查 (ShellCheck)
  - YAML文件验证 (yamllint)
  - Docker Compose配置测试
  - 文档链接检查 (markdown-link-check)
  - 安全扫描 (Trivy)

- **自动发布流水线** (`.github/workflows/release.yml`):
  - 自动创建GitHub Release
  - 生成多种发布包 (基础版、完整版、脚本版)
  - 自动提取和生成更新日志
  - 多渠道通知 (Telegram、邮件)

- **Docker镜像构建** (`.github/workflows/docker-build.yml`):
  - 多平台镜像构建 (amd64, arm64)
  - 自动推送到GitHub Container Registry
  - 自动推送到Docker Hub
  - 镜像安全扫描和测试

#### 📝 Issue和PR模板
- **Bug报告模板** - 结构化的问题报告
- **功能请求模板** - 详细的需求收集
- **问题咨询模板** - 分类清晰的帮助模板
- **PR模板** - 完整的代码贡献流程

### 🐳 Docker容器化支持

#### 📦 容器镜像
- **pt-docker-installer** - 安装器容器镜像
- **多平台支持** - 支持AMD64和ARM64架构
- **完整功能** - 容器内包含所有安装和管理功能

#### 🔧 容器功能
- **交互式安装** - 支持在容器内进行交互式安装
- **一键部署** - 支持通过容器快速部署整套环境
- **目录挂载** - 灵活的配置和数据目录挂载
- **网络集成** - 与宿主机Docker环境完美集成

### 🔧 技术架构优化

#### 📊 代码质量提升
- **模块化设计** - 功能分离，易于维护和扩展
- **错误处理** - 完善的异常捕获和处理机制
- **日志系统** - 分级日志记录和管理
- **参数验证** - 输入参数的完整验证和清理

#### 🔒 安全性增强
- **权限检查** - 严格的用户权限验证
- **路径验证** - 防止路径注入和越权访问
- **信号处理** - 优雅的中断和清理机制
- **依赖检查** - 自动检测和安装必要依赖

#### ⚡ 性能优化
- **并行处理** - 支持并发下载和安装
- **缓存机制** - 智能的下载和配置缓存
- **资源限制** - 合理的系统资源使用限制
- **网络优化** - 优化的网络配置和连接管理

### 📋 兼容性支持

#### 🖥️ 系统兼容性
- **Ubuntu** 18.04, 20.04, 22.04
- **Debian** 10, 11, 12
- **CentOS** 7, 8, Stream
- **Rocky Linux** 8, 9
- **Fedora** 最新版本

#### 🏗️ 架构支持
- **x86_64** (AMD64) - 完全支持
- **ARM64** (aarch64) - 完全支持
- **ARMv7** - 基础支持

### 📈 项目统计

#### 📊 代码统计
- **总文件数**: 35个文件
- **代码行数**: 6300+ 行
- **脚本文件**: 6个 (~3000行)
- **配置文件**: 11个 (~800行)
- **文档文件**: 8个 (~2000行)
- **GitHub配置**: 8个 (~500行)

#### 🎯 功能覆盖
- **支持应用数**: 50+ 个应用
- **应用分类**: 7大类别
- **配置模板**: 20+ 个模板
- **管理命令**: 15+ 个命令

### 🚀 使用体验改进

#### 💡 用户友好性
- **一键安装** - `curl -fsSL https://raw.githubusercontent.com/everett7623/pt-docker-installer/main/install.sh | bash`
- **交互式界面** - 友好的菜单和选择界面
- **智能检测** - 自动检测系统环境和配置
- **详细提示** - 每个步骤都有清晰的说明和建议

#### 🔧 维护便利性
- **统一管理** - `pt-docker` 命令管理所有服务
- **自动备份** - 定时备份重要配置和数据
- **状态监控** - 实时监控服务状态和健康度
- **日志管理** - 集中的日志收集和管理

### 📝 文档完善

#### 📖 用户文档
- **快速开始指南** - 5分钟快速上手
- **详细安装说明** - 分步骤详细说明
- **配置指南** - 各应用的详细配置方法
- **故障排除** - 常见问题和解决方案

#### 👨‍💻 开发文档
- **项目架构说明** - 完整的项目结构介绍
- **贡献指南** - 如何参与项目贡献
- **API文档** - 脚本接口和函数说明
- **测试指南** - 如何进行测试和验证

### 🌟 社区和生态

#### 🤝 开源协作
- **MIT许可证** - 开放友好的许可协议
- **GitHub托管** - 完整的开源协作流程
- **Issue模板** - 规范的问题报告和需求收集
- **PR流程** - 完善的代码贡献流程

#### 📢 用户支持
- **多渠道支持** - GitHub Issues、文档、FAQ
- **版本管理** - 语义化版本和自动更新
- **通知系统** - 支持多种通知方式
- **社区反馈** - 积极响应用户需求和建议

---

### 📞 获取帮助

如果在使用过程中遇到问题：
1. 查看 [FAQ文档](FAQ.md)
2. 查看 [安装指南](docs/installation.md)
3. 查看 [配置指南](docs/configuration.md)
4. 在 [GitHub Issues](https://github.com/everett7623/pt-docker-installer/issues) 中搜索或报告问题

### 🙏 致谢

感谢所有开源项目的贡献者，感谢PT社区的支持和反馈，让这个项目能够不断完善和发展。
